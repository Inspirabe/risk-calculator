<ion-header>
  <ion-toolbar>
      <div class="flex items-center justify-center">
        <img src="assets/logo.png" alt="Risk Calculator" class="title-icon" />
        <span>Risk Calculator</span>
      </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
    <ion-list inset="true">
        <ion-item lines="full">
            <ion-label class="font-semibold">Settings</ion-label>
        </ion-item>

        <ion-item lines="full">
            <ion-label>Dark Mode</ion-label>
            <ion-toggle
            slot="end"
            [(ngModel)]="is_dark_mode"
            (ionChange)="setDarkMode(is_dark_mode)">
            </ion-toggle>
        </ion-item>

        <ion-item lines="full">
            <ion-label class="w-50">Capital</ion-label>
            <button
                type="button"
                slot="end"
                (click)="openCapital()"
                class="bg-gray-100 dark:bg-gray-800 rounded-md text-sm text-right w-auto p-2">
                {{ formatCurrency(settings.capital) }}
            </button>
        </ion-item>

        <ion-item lines="full">
            <ion-label class="w-50">Desired Risk</ion-label>
            <button
                type="button"
                slot="end"
                (click)="openRiskPct()"
                class="px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-800 text-sm font-semibold">
                {{ desired_risk }}<span class="opacity-70">%</span>
            </button>
        </ion-item>

        <ion-item lines="full">
            <ion-label class="w-50">Capital at Risk</ion-label>
            <p slot="end" class="rounded-md text-sm text-right w-auto p-2" >
                {{ formatCurrency(risk_capital) }}
            </p>
        </ion-item>

        <ion-item lines="full" class="py-0">
            <ion-label>Default Leverage</ion-label>
            <button type="button"
                    slot="end"
                    (click)="openLeverage()"
                    class="px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-800 text-sm font-semibold">
                {{ leverage }}<span class="opacity-70">x</span>
            </button>
        </ion-item>

        <ion-item lines="full">
            <ion-label>Auto Apply Leverage & Cost</ion-label>
            <ion-toggle
            slot="end"
            [(ngModel)]="settings.apply_recom_leverage"
            (ionChange)="settings.setApplyRecomLeverage(settings.apply_recom_leverage)">
            </ion-toggle>
        </ion-item>

        <ion-item lines="none" class="py-3">
            <ion-label class="font-[0.875rem] font-medium">Platform</ion-label>
            <ion-select
                slot="end"
                interface="popover"
                [value]="this.settings.selected_platform"
                (ionChange)="onPlatformChange($event.detail.value)"
                class="px-3 py-0 rounded-lg bg-gray-100 dark:bg-gray-800 text-sm font-semibold min-w-[8rem]"
                >
                <ion-select-option value="">— None —</ion-select-option>
                <ion-select-option
                    *ngFor="let p of settings.platforms"
                    [value]="p.id">
                    {{ p.label }}
                </ion-select-option>
            </ion-select>
        </ion-item>
    </ion-list>


    <ion-card>
        <ion-item lines="none" class="my-4">
            <ion-label position="stacked">Client UID</ion-label>
            <ion-input
                type="text"
                inputmode="text"
                [value]="this.settings.user_client_uid"
                class="bg-gray-100 dark:bg-gray-800 rounded-md text-right"
                style="--padding-end: .75rem;"
                (ionInput)="onClientInput($event)"
                (ionFocus)="selectAll($event)"
                >
            </ion-input>
        </ion-item>
    </ion-card>


</ion-content>
